---
layout: single
title: "[스프링 입문] API"
excerpt: "API"
date: 2022-08-02T18:18:00+09:00
toc: true
toc_sticky: true
categories:
  - Spring
  - 스프링 입문
tags:
  - Spring
  - 스프링 입문
  - Java
---
**
*이 글은 김영한 님의 [스프링 입문 - 코드로 배우는 스프링 부트, 웹 MVC, DB 접근 기술](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%EC%9E%85%EB%AC%B8-%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8) 강의를 바탕으로 공부한 내용을 정리한 글입니다.*
**

## API 방식이란
API 방식은 특정 형식으로 클라이언트에게 데이터를 전달하는 방식으로 과거에는 XML 형식을 사용했지만 요즘에는 주로 JSON 형식을 사용한다. API 방식은 View를 React와 같은 프레임워크를 사용하여 따로 개발할 때나 서버끼리 통신할 때와 같이 html을 전송할 필요 없이 데이터만 전송하면 될 때 사용한다.

## 문자를 반환하는 방식
```java
@Controller
public class HelloController {

  @GetMapping("hello-string")
  @ResponseBody
  public String helloString(@RequestParam("name") String name) {
    return "hello " + name;
  }

}
```

### 결과
<http://localhost:8080/hello-string?name=yenny>

![image](https://user-images.githubusercontent.com/60471550/182332946-243ac476-a35e-4b0b-ab12-26003027ec18.png)

문자열 그대로 반환된다.

## 객체를 반환하는 방식
```java
@Controller
public class HelloController {
  
  @GetMapping("hello-api")
  @ResponseBody
  public Hello helloApi(@RequestParam("name") String name) {
    Hello hello = new Hello();
    hello.setName(name);
    return hello;
  }

  static class Hello {
    private String name;
  
    public String getName() {
      return name;
    }
 
    public void setName(String name) {
      this.name = name;
    }
  }

}
```

### 결과
<http://localhost:8080/hello-api?name=yenny>

![image](https://user-images.githubusercontent.com/60471550/182333785-a28970b5-1a73-47a0-8248-b063ec2921fe.png)

JSON 형식으로 반환된다.

## 동작 방식
![image](https://user-images.githubusercontent.com/60471550/182338466-bd78cc17-dd7d-440d-b675-a6efe32920d1.png)

`@ResponseBody`를 사용하면 스프링에서 viewResolver 대신 HttpMessageConverter가 동작한다. 기본 문자를 받았을 때는 StringHttpMessageConverter를 통해 처리하고, 객체를 받았을 때는 MappigJackson2HttpMessageConverter를 사용하여 처리한다. Jacskon은 객체를 JSON 형태로 바꿔주는 라이브러리로 스프링 부트에서 객체를 처리할 때 기본 라이브러리로 사용하고 있다. HttpMessageConverter를 통해 처리된 데이터는 HTTP BODY부에 직접 반환된다.