---
layout: single
title: "[스프링 입문] MVC와 템플릿 엔진"
excerpt: "MVC와 템플릿 엔진"
date: 2022-08-02T17:18:00+09:00
toc: true
toc_sticky: true
categories:
  - Spring
  - 스프링 입문
tags:
  - Spring
  - 스프링 입문
  - Java
---
**
*이 글은 김영한 님의 [스프링 입문 - 코드로 배우는 스프링 부트, 웹 MVC, DB 접근 기술](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%EC%9E%85%EB%AC%B8-%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8) 강의를 바탕으로 공부한 내용을 정리한 글입니다.*
**

## MVC란
MVC는 **M**odel, **V**iew, **C**ontroller를 뜻한다. MVC에는 Model 1방식과 Model 2방식이 존재한다. Model 1방식은 View에서 Controller의 역할까지 모두 하는 것이고, Model 2방식은 View는 화면을 구성하는 일만, Controller는 비지니스 로직과 관련있거나 내부적인 것을 처리하는 일만 집중하도록 분리해놓은 것이다. 

## 템플릿 엔진이란
템플릿 엔진은 html을 동적으로 바꿔서 웹브라우저에 띄울 수 있도록 하는 것으로 JSP, PHP 등이 있다.

## Controller
```java
@Controller
public class HelloController {
 @GetMapping("hello-mvc")
 public String helloMvc(@RequestParam("name") String name, Model model) {
 model.addAttribute("name", name);
 return "hello-template";
 }
}
```
이전에 만들어놓았던 HelloController에 helloMvc 함수를 추가해보자. 이 함수는 `@RequestParam`을 사용하여 사용자로부터 name 값을 받아낸 후 모델로 감싸서 hello-template을 리턴한다.

## View
resources/template/hello-template.html
```html
<html xmlns:th="http://www.thymeleaf.org">
<body>
<p th:text="'hello ' + ${name}">hello! empty</p>
</body>
</html>
```
위와 같이 hello-template.html을 작성해보자. 맨 위에 Thymeleaf를 넣어주었는데 Thymeleaf는 템플릿 엔진으로 html을 동적으로 바꿀 수 있도록 해준다. ${name}에 컨트롤러에서 전달받은 모델에 들어있는 name 값이 들어가서 화면에 보여지게 된다. 만약 name으로 yenny를 받았다면 화면에 hello yenny가 나오게 되는 것이다. `<p>`태그 안에 적힌 `hello! empty`는 사실상 필요 없지만, Thymeleaf를 사용하면 html파일 경로로 해서 서버 없이 웹 브라우저에서 파일을 열어볼 수 있는데 그럴 경우 내용을 볼 수 있도록 해놓은 것이다. 주로 html 마크업하시는 분들이 작업할 때 필요한 값을 적어놓는 용도로 사용한다고 한다.

## 결과
<http://localhost:8080/hello-mvc?name=yenny>

![image](https://user-images.githubusercontent.com/60471550/182300628-28c41247-798f-458c-9b8d-95d43bc851d7.png)

?뒤에 name=yenny라고 값을 전달하면 화면에 hello yenny가 나오는 것을 볼 수 있다.

## 동작 방식
![image](https://user-images.githubusercontent.com/60471550/182301035-6f09d3ef-1bd8-4416-af24-be0eb0067a0e.png)

웹 브라우저에서 localhost:8080/hello-mvc를 호출하면 톰캣 내장 서버가 스프링에 요청을 전달한다. 요청을 받은 스프링은 hello-mvc와 매핑된 helloController를 찾아 요청을 넘겨준다. helloController는 받은 name 값 spring을 가지고 모델을 만들어 viewResolver에게 hello-template을 리턴해준다. viewResolver는 helloController에서 리턴한 값을 가지고 templates에서 hello-template.html을 찾아 Thymeleaf에 모델을 넘겨준다. 그러면 Thymeleaf는 받은 모델을 가지고 html을 렌더링해서 웹 브라우저에 반환한다.